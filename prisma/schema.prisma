generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Submission {
  id                 String    @id @default(cuid())
  brandName          String
  founderName        String
  email              String
  website            String?
  medicalCredentials String
  specialty          String
  productType        String
  currentRevenue     String
  biggestChallenge   String    @db.Text
  targetAudience     String    @db.Text
  timeline           String
  howDidYouHear      String
  additionalInfo     String?   @db.Text
  status             String    @default("new")
  pdfUrl             String?
  sentAt             DateTime?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt

  // Brief generation fields
  briefHtml          String?   @db.Text
  briefGeneratedAt   DateTime?
  adConcepts         String?   @db.Text  // JSON string of generated ad concepts
  generatedImages    GeneratedImage[]
}

model GeneratedImage {
  id           String     @id @default(cuid())
  submissionId String
  submission   Submission @relation(fields: [submissionId], references: [id], onDelete: Cascade)
  adNumber     Int        // 1-10 (which ad concept)
  imageNumber  Int        // 1-3 (which variant)
  prompt       String     @db.Text
  imageUrl     String
  createdAt    DateTime   @default(now())

  @@index([submissionId])
}

model User {
  id           String @id @default(cuid())
  email        String @unique
  passwordHash String
}
